{% load spurl %}
{% load i18n %}


<div class="container">
    <h3 class="is-size-5 has-text-weight-bold">{{ need.title }}</h3>
    <p>{{ need.description }}</p>

    {% if current_need is not None and current_need.pk == need.pk %}
    <form method="post">
        {% csrf_token %}

        {{ form.non_field_errors }}

        {% for hidden_field in form.hidden_fields %}
        {{ hidden_field.errors }}
        {{ hidden_field }}
        {% endfor %}

        <table border="1">
            {% for field in form.visible_fields %}
            <tr>
                <th>{{ field.label_tag }}</th>
                <td>
                    {{ field.errors }}
                    {{ field }}
                    {{ field.help_text }}
                </td>
            </tr>
            {% endfor %}
        </table>
        <input type="submit" value="Create">
    </form>
    {% else %}
    {% url 'ngo-helper-create' ngo.pk need.pk as base %}
    <div class="content has-text-centered">
        <a class="button is-medium has-background-success has-text-weight-bold has-text-white"
           href="{% spurl base='{{ base }}' set_query='kind={{ need.kind }}' set_query='page={{ page }}' %}">{% trans "I can help" %}</a>
    </div>
    {% endif %}
</div>
