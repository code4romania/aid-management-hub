{% extends 'base.html' %}
{% load red_cross_tag %}
{% load static %}
{% load spurl %}
{% load i18n %}

{% block content %}
<div class="search-wrapper container is-flex">
    <form action="{% url 'ngos' %}" method="GET">
        <div class="field border-b">
            <p class="control has-icons-right ">
                <input class="input search-input" type="text" name="q" value="{{ current_search }}" placeholder="{% trans 'Search...' %}">
                <label class="search-icon">
                    <span class="icon is-small is-right">
                        <i class="fas fa-search"></i>
                    </span>
                    <input type="submit" style="display: none;"/>
                </label>
            </p>
        </div>
    </form>
</div>

<div class="container">
    {% block extra-header %}
        <div id="donate_safely" class="container">
            <h1 class="donate-title">
                {% trans "Donate safely" %}
            </h1>
            <p class="donate-subtitle">
                {% trans "RoHelp is a fully-featured digital platform which lends itself to be used by all organizations which are actively involved in halting the spread of Covid-19. The main purpose of the paltform is to help organizations collect the resources they need. As a user, the platform will help you find the most pressing needs that organizations face across the country. As a result, it makes it easy for you to chose the cause you donate to, or the efforts you contribute to." %}
            </p>
        </div>

        {% fetch_red_cross_data as red_cross %}
        {% if red_cross %}
        <div id="redcross-banner" class="container is-flex">
            <div class="card-image is-hidden-mobile" style="min-width:115px;">
                <img src="{% static "images/crucearosie_logo.svg" %}" alt="Crucea Rosie logo">
            </div>
            <div class="card-info">
                <div class="flex-align-center">
                    <div class="card-image is-hidden-tablet">
                        <img src="{% static "images/crucearosie_logo.svg" %}" alt="Crucea Rosie logo">
                    </div>
                    <div class="need-title is-hidden-tablet">{% trans "Red Cross" %}</div>
                </div>
                <div class="need-title is-hidden-mobile">{% trans "Red Cross" %}</div>
                <div class="redcross-text">
                    {% blocktrans %}
                        Societatea Națională de Cruce Roșie Română reprezintă punctul principal de colectare la nivel național, atât pentru donații financiare care vor fi utilizate în vederea achiziționarii de echipamente și materiale sanitare, respectiv produse și bunuri materiale care vor fi distribuite - în funcție de nevoi și/sau solicitări - pe teritoriul național.
                    {% endblocktrans %}
                </div>
            </div>
            {% if red_cross.money_need %}
                {% url 'ngo-need' red_cross.obj.pk red_cross.money_need.pk as base %}
                <div class="need-call2action"><a href="{% spurl base='{{ base }}' set_query='kind={{ red_cross.money_need.kind }}' %}" class="button is-success">{% trans "Donate" %}</a></div>
            {% else %}
                <div class="need-call2action"><a href="{% url 'ngo-detail' red_cross.obj.pk %}" class="button is-success">{% trans "Donate" %}</a></div>
            {% endif %}
        </div>
        {% endif %}
    {% endblock %}

    {% block kind-kind-filters %}
    <div id="aid_types" class="container">
        <div class="columns is-multiline">
            <div class="column is-4 filter">
                <div class="{% if current_kind == 'money' %}card-active{% else%}card{% endif %}">
                    <a href="{% spurl base='{{ current_url }}' set_query='kind=money' remove_query_param='page' %}"
                       class="has-text-black is-flex">
                        <span class="call-to-action" style="background-color: #bfd1e3;">
                            <i class="far fa-check-circle"></i>
                        </span>
                        <div class="card-content">{% trans "I want to help with money" %}</div>
                    </a>
                </div>
            </div>

            <div class="column is-4 filter">
                <div class="{% if current_kind == 'resource' %}card-active{% else%}card{% endif %}">
                    <a href="{% spurl base='{{ current_url }}' set_query='kind=resource' remove_query_param='page' %}"
                       class="is-flex has-text-black">
                        <span class="call-to-action" style="background-color: #bfd1e3;">
                         <i class="far fa-check-circle"></i>
                        </span>
                        <div class="card-content">{% trans "I want to help with resources" %}</div>
                    </a>
                </div>
            </div>

            <div class="column is-4 filter">
                <div class="{% if current_kind == 'volunteer' %}card-active{% else%}card{% endif %}">
                    <a href="{% spurl base='{{ current_url }}' set_query='kind=volunteer' remove_query_param='page' %}"
                       class="is-flex has-text-black">
                         <span class="call-to-action" style="background-color: #bfd1e3;">
                            <i class="far fa-check-circle"></i>
                         </span>
                        <div class="card-content">{% trans "I want to volunteer" %}</div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% endblock %}

    <div class="columns">

        <div class="column is-two-thirds">
            {% block left-side-view %}
            {% endblock %}
        </div>

        <div id="right_sidebar" class="column is-one-third">
            {% block right-side-view %}
            <div class="container">

                <h1 class="donate-title">
                    <span>
                        <img src="{% static "images/covid-all.svg" %}" alt="Covid-19 logo" width="30" height="30">
                    </span>
                    {% trans "Useful instruments" %}
                </h1>

                {% for project in info %}
                <div class="tool">
                    <div class="is-flex">
                        <span style="border-left: 1rem solid; border-left-color: {{ project.color }};"></span>
                        <h1 class="card-content" style="background-color: #f0f0f0;">
                            {{ project.call_to_action }}</h1>
                    </div>
                    <div class="card-content" style="background-color: #fafafa;">
                        {% if project.description %}
                        <p class="call-to-action">{{project.description}}</p>
                        {% endif %}
                        <a class="button is-fullwidth is-white has-text-centered has-text-weight-bold sidebar-btn"
                           style="background-color: {{ project.color }};" href="{{project.url}}"
                           rel="nofollow">
                            {{ project.button_text }}
                        </a>
                    </div>
                </div>

                {% endfor %}
            </div>
            {% endblock %}
        </div>
    </div>

</div>
{% endblock %}
